<!DOCTYPE html>
<html lang="en">
  <head>
    <% if (process.env.REACT_APP_ENABLE_ANALYTICS === "true") { %>
    <!-- Google Analytics -->
    <!-- prettier-ignore -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-158972025-1', 'auto');
      ga('send', 'pageview');
      </script>
    <!-- End Google Analytics -->
    <% } else { %>
    <!-- [INFO] Analytics scripts omitted for environment: %NODE_ENV% -->
    <% } %>

    <meta charset="utf-8" />

    <link rel="icon" type="image/png" href="%PUBLIC_URL%/fav-circle.png" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="theme-color" content="#000000" />
    <meta
      name="description"
      content="Learn to code with hands-on challenges and projects"
    />
    <link rel="apple-touch-icon" href="logo192.png" />
    <!--
      manifest.json provides metadata used when your web app is installed on a
      user's mobile device or desktop. See https://developers.google.com/web/fundamentals/web-app-manifest/
    -->
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
    <!--
      Notice the use of %PUBLIC_URL% in the tags above.
      It will be replaced with the URL of the `public` folder during the build.
      Only files inside the `public` folder can be referenced from the HTML.

      Unlike "/favicon.ico" or "favicon.ico", "%PUBLIC_URL%/favicon.ico" will
      work correctly both with client-side routing and a non-root public URL.
      Learn how to configure a non-root public URL by running `npm run build`.
    -->
    <title>Pairwise Workspace</title>
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>
    <!--
      This HTML file is a template.
      If you open it directly in the browser, you will see an empty page.

      You can add webfonts, meta tags, or analytics to this file.
      The build step will place the bundled scripts into the <body> tag.

      To begin the development, run `npm start` or `yarn start`.
      To create a production bundle, use `npm run build` or `yarn build`.
    -->
    <div id="pw-initial-loading">
      <style>
        @keyframes pw-spin {
          from {
            transform: rotateZ(0deg);
          }
          to {
            transform: rotateZ(360deg);
          }
        }
        /* prettier-ignore */
        body, html { background-color: #1e1e1e; }
        /* prettier-ignore */
        .pw-initial-loading { top: 0; left: 0; right: 0; bottom: 0; position: absolute; }
        /* prettier-ignore */
        svg.pw-initial-loading { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); animation: pw-spin 1s ease-in-out infinite; }
      </style>
      <!-- prettier-ignore -->
      <svg class="pw-initial-loading" width="78" height="78" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 78 78">
        <g transform="rotate(-90 39 39)">
          <circle cx="39" cy="39" r="36" fill="none" stroke="#555" stroke-width="6" ></circle>
          <circle cx="39" cy="39" r="36" fill="none" stroke="#75FBBE" stroke-width="6" stroke-dasharray="226.1946710584651" stroke-dashoffset="113.09733552923255" stroke-linecap="round" class="circle" ></circle>
        </g>
      </svg>
      <script>
        // Clear this loading spinner once the app has loaded. This is a polling
        // mechanism. It would be perhaps cleaner to use the actual app init event
        // but this way everything is located here. The rest of the app doesn't even need
        // to know that this exists.
        const interval = setInterval(() => {
          if (document.querySelector("#root").firstChild) {
            clearInterval(interval);
            const el = document.querySelector(".pw-initial-loading");
            el.parentElement.removeChild(el);
          }
        }, 100);
      </script>
    </div>
    <% if (process.env.REACT_APP_CODEPRESS === "true") { %>
    <!-- 
      Live Reload was causing issues for us in codepress. Namely it was
      occasionally reloading before we saved and it would reload on image
      upload, which would prevent saving. 
    -->
    <script>
      {
        var WS = window.WebSocket;
        function DevWebSocket(s) {
          if (s === "ws:localhost:3000/sockjs-node") {
            console.info("[CODEPRESS NOTICE] Live Reload Has Been Disabled");
            return {};
          } else {
            // Pass through other usage of sockets
            return new WS(s);
          }
        }
        window.WebSocket = DevWebSocket;
      }
    </script>
    <% } %>
    <script async src="https://js.stripe.com/v3/"></script>
  </body>
</html>
